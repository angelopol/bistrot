<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mesas</title>
    <link rel="stylesheet" href="mesas.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap">
</head>
<body>
    <div class="heading">
        <div class="titulo">
            <h1>BISTROT CHEZ RÉMY</h1>
        </div>
        <div class="usuario">
            <select name="usuario" id="usuario">
                <option value="gerente0000">gerente0000</option>
                <option value="gerente0001">gerente0001</option>
            </select>
        </div>
    </div>
    <div class="pagina">
        <div class="sidebar">
            <nav>
                <ul>
                    <li><a href="#"><img src="imagenes/icono_inicio.png" alt="Inicio">Inicio</a></li>
                    <li><a href="#"><img src="imagenes/icono_ventas.png" alt="Ventas/Salón">Ventas/Salón</a></li>
                    <li><a href="#"><img src="imagenes/icono_compras.png" alt="Compras">Compras</a></li>
                    <li><a href="#"><img src="imagenes/icono_rrhh.png" alt="RRHH">RRHH</a></li>
                    <li><a href="#"><img src="imagenes/icono_inventario.png" alt="Inventario">Inventario</a></li>
                    <li><a href="#"><img src="imagenes/icono_mantenimiento.png" alt="Mantenimiento">Mantenimiento</a></li>
                    <li><a href="#"><img src="imagenes/icono_cocina.png" alt="Cocina/Bar">Cocina/Bar</a></li>
                    <li><a href="#"><img src="imagenes/icono_reservas.png" alt="Reservas">Reservas</a></li>
                    <li><a href="#"><img src="imagenes/icono_reporte.png" alt="Reportes">Reportes</a></li>
                    <li><a href="#"><img src="imagenes/icono_config.png" alt="Configuraciones">Configuraciones</a></li>
                    <li><a href="#"><img src="imagenes/icono_ayuda.png" alt="Ayuda">Ayuda</a></li>
                </ul>
            </nav>
        </div>
        <div class="contenido">
            <div class="contenidop">
                <div class="Reservar">
                    <h2>
                        <a href="/">
                            <img src="imagenes/icono_salida.png" alt="regresar">
                        </a>
                        Reservar
                    </h2>
                </div>
                <div class="seccion">
                    <h2>Mesas</h2>
                </div>
            </div>
            <div class="distribucion">
                <div class="arriba">
                    <div class="interior">
                        <h3>Interior</h3>
                        <div class="button" data-number="1" data-location="interior">1</div>
                        <div class="button" data-number="2" data-location="interior">2</div>
                        <div class="button" data-number="3" data-location="interior">3</div>
                        <div class="button" data-number="4" data-location="interior">4</div>
                        <div class="button" data-number="5" data-location="interior">5</div>
                        <div class="button" data-number="6" data-location="interior">6</div>
                        <div class="button" data-number="7" data-location="interior">7</div>
                        <div class="button" data-number="8" data-location="interior">8</div>
                        <div class="button" data-number="9" data-location="interior">9</div>
                    </div>
                    <div class="exterior">
                        <h3>Exterior</h3>
                        <div class="button" data-number="10" data-location="exterior">10</div>
                        <div class="button" data-number="11" data-location="exterior">11</div>
                    </div>
                </div>
                <div class="abajo">
                    <h3>Barra</h3>
                    <div class="button" data-number="1" data-location="barra">1</div>
                    <div class="button" data-number="2" data-location="barra">2</div>
                    <div class="button" data-number="3" data-location="barra">3</div>
                    <div class="button" data-number="4" data-location="barra">4</div>
                    <div class="button" data-number="5" data-location="barra">5</div>
                </div>
            </div>
            <button id="mesa">Seleccionar mesa</button>
            <div id="mesas-container"></div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Array para almacenar los números de mesa seleccionados
            let selectedButtons = JSON.parse(localStorage.getItem("selectedButtons")) || [];
            
            // Set para almacenar las ubicaciones seleccionadas (interior, exterior, barra)
            let selectedLocations = new Set();

            // Función para actualizar la visualización de las mesas seleccionadas
            function updateSelectedButtons() {
                document.querySelectorAll(".button").forEach(button => {
                    const number = button.getAttribute("data-number");
                    if (selectedButtons.includes(number)) {
                        button.classList.add("selected");
                    } else {
                        button.classList.remove("selected");
                    }
                });
            }

            // Cargar la selección almacenada al cargar la página
            updateSelectedButtons();

            // Añadir evento de clic a todos los botones de mesa
            document.querySelectorAll(".button").forEach(button => {
                button.addEventListener("click", function() {
                    const number = this.getAttribute("data-number");
                    const location = this.getAttribute("data-location");
                    if (this.classList.contains("selected")) {
                        this.classList.remove("selected");
                        selectedButtons = selectedButtons.filter(btn => btn !== number);
                        selectedLocations.delete(location);
                    } else {
                        this.classList.add("selected");
                        selectedButtons.push(number);
                        selectedLocations.add(location);
                    }
                    localStorage.setItem("selectedButtons", JSON.stringify(selectedButtons));
                });
            });

            // Añadir evento al botón "Seleccionar mesas"
            const mesaButton = document.getElementById("mesa");
            mesaButton.addEventListener("click", function() {
                const selectedNumbers = selectedButtons.join(",");
                const selectedLocationsArray = Array.from(selectedLocations).join(",");

                // Crear inputs ocultos para mesas y ubicaciones
                const inputMesas = document.createElement("input");
                inputMesas.type = "hidden";
                inputMesas.name = "mesas";
                inputMesas.value = selectedNumbers;

                const inputLocations = document.createElement("input");
                inputLocations.type = "hidden";
                inputLocations.name = "zonas";
                inputLocations.value = selectedLocationsArray;

                // Adjuntar los inputs al elemento contenedor de mesas
                const mesasContainer = document.getElementById("mesas-container");
                mesasContainer.innerHTML = ""; // Limpiar contenido anterior si existe
                mesasContainer.appendChild(inputMesas);
                mesasContainer.appendChild(inputLocations);

                console.log("Mesas seleccionadas:", selectedNumbers);
                console.log("Zonas seleccionadas:", selectedLocationsArray);
                
                // Puedes realizar más acciones aquí, como enviar los datos a través de AJAX o redirigir
                window.location.href = "/CrearReservas";
            });
        });
    </script>
</body>
</html>
